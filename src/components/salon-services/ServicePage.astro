---
/**
 * ServicePage component
 * Single Responsibility: Display a service page with pricing and booking options
 */
import Header from '../Header.astro';
import PricingSection from '../service-pricing/PricingSection.astro';
import Layout from '../../layouts/Layout.astro';
import BookButtonGroup from '../buttons/BookingButtonGroup.astro';
import Footer from '../Footer.astro';
import StructuredData from '../SEO/StructuredData.astro';
import Breadcrumbs from '../SEO/Breadcrumbs.astro';
import FAQSection from '../FAQSection.astro';
import GalleryLink from '../GalleryLink.astro';
import { generateServiceSchema } from '../../utils/structuredData';
import { BUSINESS_INFO } from '../../config/constants';
import type { Service, FAQItem } from '../../utils/structuredData';
import '../../styles/services.css';

export interface Props {
    title: string;
    description: string;
    pageTitle: string;
    introText: string;
    services: Service[];
    faqs?: FAQItem[];
    galleryHeading?: string;
    gallerySubtext?: string;
    galleryUrl?: string;
}

const { title, description, pageTitle, introText, services, faqs, galleryHeading, gallerySubtext, galleryUrl } = Astro.props;

// Generate service-specific structured data
const serviceStructuredData = generateServiceSchema(pageTitle, description, services);
---

<Layout title={title} description={description}>
    <StructuredData data={serviceStructuredData} />
    <Breadcrumbs items={[
        { name: "Home", url: BUSINESS_INFO.website },
        { name: "Services", url: `${BUSINESS_INFO.website}/services` },
        { name: pageTitle, url: Astro.url.href },
    ]} />

    <Header />
    
    <main class="service-page">
        <div class="service-container">
            <div class="service-content">
                <h1>{pageTitle}</h1>
                <p class="service-intro">{introText}</p>

                {galleryUrl && galleryHeading && gallerySubtext && (
                    <GalleryLink
                        heading={galleryHeading}
                        subtext={gallerySubtext}
                        href={galleryUrl}
                    />
                )}

                <div class="services-list">
                    {services.map((service) => (
                        <PricingSection 
                            serviceName={service.serviceName} 
                            price={service.price} 
                            description={service.description}
                        />
                    ))}
                </div>

                {faqs && faqs.length > 0 && (
                    <FAQSection faqs={faqs} />
                )}
            </div>
            
            <div class="button-group-sidebar">
                <BookButtonGroup />
            </div>
        </div>
    </main>
    <Footer />
</Layout>
